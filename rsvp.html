<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RSVP page</title>
    <link href="/style.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <div class="header-bg">
        <img src="./images/bg2.png" />
      </div>
      <h2 class="rsvp-title">
        Please, fill out this form before May 1st!<br /><small
          class="rsvp-subtitle"
          >(you can fill it out only once per household)</small
        >
      </h2>

      <div class="flex-container">
        <div class="flex-item home-link">
          <a href="./index.html">E<br />/<br />M</a>
        </div>
        <div class="flex-item">29<br />/<br />06</div>
      </div>
      <div class="navbar">
        <ul class="nav-links">
          <li class="nav-item">
            <a href="./info.html" class="nav-link">INFO</a>
          </li>
          <li class="nav-item">
            <a href="./rsvp.html" class="nav-link">RSVP</a>
          </li>
        </ul>
      </div>
      <div class="invitee-form">
        <form id="inviteeForm">
          <ul>
            <li>
              <label for="name">Your full name:</label><br /><input
                type="text"
                name="name"
                id="name"
                required
              />
            </li>
            <li>
              <label for="email">Your email adress:</label><br />
              <input type="email" name="email" id="email" />
            </li>
            <li>
              <label for="diet">Diet/allergies:</label><br />
              <input type="text" name="diet" id="diet" />
            </li>
            <li>
              <select id="response" name="response">
                <option value="">Are you coming?</option>
                <option value="yes">Yes!</option>
                <option value="maybe">Not sure yet</option>
                <option value="no">No..</option>
              </select>
            </li>
            <li>
              <select id="extras" name="extras">
                <option value="">Who is coming with you?</option>
                <option value="yes">Noone</option>
                <option value="maybe">My +1</option>
                <option value="no">Kid(s)</option>
                <option value="no">My +1 and kid(s)</option>
              </select>
            </li>
            <li>
              <label for="msg"
                >Anything else we should know? <br />(names and alergies/diet of
                the extras)</label
              ><br />
              <textarea name="msg" id="msg"></textarea>
            </li>
            <li class="submit">
              <button type="submit">Submit</button>
            </li>
          </ul>
        </form>
      </div>
    </header>
    <footer>Â©2023 Eliska Cerna</footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
      document.body.className += "js-loading";
      window.addEventListener("load", showPage, false);

      function showPage() {
        document.body.className = document.body.className.replace("js-loading");
      }

      const form = document.getElementById("inviteeForm");
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(event.target);

        const jsonData = {};
        formData.forEach((value, key) => {
          jsonData[key] = value;
        });

        fetch(
          "https://script.google.com/macros/s/AKfycbxLQ_z2RFlAVHzg2tyZy1XhrxuP2vF_XmKUjm6pj8__8jywywH5THjEIMTopVkBFeKU/exec",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(jsonData),
          }
        )
          .then((response) => response.json())
          .then((data) => {
            console.log("Success", data);
          })
          .catch((error) => {
            console.error("Error", error);
          });
        // let full_name = document.getElementById("name").value;
        // let email = document.getElementById("email").value;
        // let diet = document.getElementById("diet").value;
        // let response = document.getElementById("response").value;
        // let extras = document.getElementById("extras").value;
        // let message = document.getElementById("msg").value;
      });
    </script>
  </body>
</html>
